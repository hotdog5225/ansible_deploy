---
- hosts: root
  remote_user: root
  tasks:
    - name: check host network
      ping: 
      register: result

    - name: add user:work, if ping is OK
      user: 
        name: work
        password: work 
        state: present
      when: result.ping == "pong"

    - name: 'install lrzsz for rz order'
      yum:
        name: lrzsz
        state: present

    - name: 'install upzip zip'
      yum:
        name: ['unzip', 'zip']
        state: present

    - name: 'install gcc-cpp'
      yum:
        name: ['gcc-c++']
        state: present

    - name: 'install ncurses-devel'
      yum:
        name: ['ncurses-devel']
        state: present

    - name: 'install bridge-utils'
      yum:
        name: ['bridge-utils']
        state: present

    - name: 'install traceroute'
      yum:
        name: ['traceroute', 'mtr' ,'bind-utils',  'telnet']
        state: present

    - name: 'install libsodium for shadowsocks'
      yum:
        name: libsodium
        state: present

    - name: 'install autoconf for privoxy'
      yum:
        name: autoconf
        state: present

      # 后续就要配置一下ssh免密登录 root 和 work账户都要配置
